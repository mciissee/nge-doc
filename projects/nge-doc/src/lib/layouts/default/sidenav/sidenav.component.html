<nav *ngIf="state$|async as state">
  <header>
    <ng-container *ngIf="state.meta.logo; else: nologo">
      <img [src]="state.meta.logo" alt="Documentation Logo">
    </ng-container>
    <ng-template #nologo>
      <mat-icon>menu_book</mat-icon>
    </ng-template>
    <h2>{{ state.meta.name }}</h2>
  </header>
  <ul class="navigation-root" *ngIf="state.pages.length">
    <ng-container *ngTemplateOutlet="template; context: { $implicit: state.pages }"></ng-container>
  </ul>
  <div class="spacer"></div>
  <nge-doc-logo></nge-doc-logo>
</nav>
<ng-template #template let-links>
  <ng-container *ngFor="let link of links; trackBy: trackBy">
    <ng-container *ngIf="!doc.isExpandable(link); else: expandable">
      <li>
        <a [routerLink]="link.href" [class.active]="doc.isActive(link)">
          <img [src]="link.icon" *ngIf="link.icon">
          {{ link.title }}
        </a>
      </li>
    </ng-container>
    <ng-template #expandable>
      <li class="caption" (click)="link.expanded = !link.expanded">
        <a [class.active]="doc.isActive(link)">
          <img [src]="link.icon" *ngIf="link.icon">
          {{ link.title }}
        </a>
        <button mat-icon-button>
          <mat-icon>{{Â link.expanded ? 'expand_more' : 'chevron_right'}}</mat-icon>
        </button>
      </li>
      <ul *ngIf="link.expanded">
          <ng-container *ngTemplateOutlet="template; context: { $implicit: link.children }"></ng-container>
      </ul>
    </ng-template>
  </ng-container>
</ng-template>
